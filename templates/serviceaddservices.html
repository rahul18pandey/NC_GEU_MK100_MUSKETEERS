{% extends "servicelayout.html" %}
{% block content %}

<script>
  $(document).ready(function () {
    createTable()
  })
</script>




<div class="maindiv" style="height: 100%;width: 100%;">

  <div class="container mastfont" style="height:80px;width: 100px;"></div>
  <div class=" mastfont"
    style=" background-color: transparent;height: 100px;width: auto;font-size: 80px;margin-left: 40%"><span class="lang-eng">Add services</span>
  <span class="lang-hin">सेवाएं जोड़ें</span>
  </div>

  <div class="container mastfont" style="height:80px;width: 70px;"></div>

  <p>
    <a class="waves-effect waves-light btn" style="margin-left: 50%;margin-bottom: 2%;">
      <input type="button" id="addRow" value="Add New Row" onclick="addRow()" style="padding: 5px;" />
    </a>
  </p>


  <div id="cont" style="margin-left: 20%;"></div> <!-- the container to add the TABLE -->
  <div id="cont" style="margin-left: 20%;"></div> <!-- the container to add the TABLE -->
</div>



<p>
  <a class="waves-effect waves-light btn" style="margin-left: 50%;margin-top: 2%;">
    <input type="button" id="bt" value="Submit Data" onclick="submit()" style="padding: 5px;" />
  </a>
</p>




</body>

<script>
  var arrHead = new Array();	// array for header.
  arrHead = ['', 'Item Name', 'Price'];

  // first create TABLE structure with the headers. 
  function createTable() {
    var empTable = document.createElement('table');
    empTable.setAttribute('id', 'empTable'); // table id.

    var tr = empTable.insertRow(-1);
    for (var h = 0; h < arrHead.length; h++) {
      var th = document.createElement('th'); // create table headers
      th.innerHTML = arrHead[h];
      tr.appendChild(th);
    }

    var div = document.getElementById('cont');
    div.appendChild(empTable);  // add the TABLE to the container.
  }

  // now, add a new to the TABLE.
  function addRow() {
    var empTab = document.getElementById('empTable');

    var rowCnt = empTab.rows.length;   // table row count.
    var tr = empTab.insertRow(rowCnt); // the table row.
    tr = empTab.insertRow(rowCnt);

    for (var c = 0; c < arrHead.length; c++) {
      var td = document.createElement('td'); // table definition.
      td = tr.insertCell(c);

      if (c == 0) {      // the first column.
        // add a button in every new row in the first column.
        var button = document.createElement('input');

        // set input attributes.
        button.setAttribute('type', 'button');
        button.setAttribute('value', 'Remove');

        // add button's 'onclick' event.
        button.setAttribute('onclick', 'removeRow(this)');

        td.appendChild(button);
      }
      else {
        // 2nd, 3rd and 4th column, will have textbox.
        var ele = document.createElement('input');
        ele.setAttribute('type', 'text');
        ele.setAttribute('value', '');

        td.appendChild(ele);
      }
    }
  }

  // delete TABLE row function.
  function removeRow(oButton) {
    var empTab = document.getElementById('empTable');
    empTab.deleteRow(oButton.parentNode.parentNode.rowIndex); // button -> td -> tr.
  }
  // function to extract and submit table data.
  function submit() {
    var myTab = document.getElementById('empTable');
    var arrValues = new Array();

    // loop through each row of the table.
    for (row = 1; row < myTab.rows.length - 1; row++) {
      // loop through each cell in a row.
      for (c = 0; c < myTab.rows[row].cells.length; c++) {
        var element = myTab.rows.item(row).cells[c];
        if (element.childNodes[0].getAttribute('type') == 'text') {
          arrValues.push("'" + element.childNodes[0].value + "'");
          //console.log(element.childNodes[0].value)
        }
      }
    }

    setService(arrValues)

    // The final output.
    //console.log (arrValues);   // you can see the array values in your browsers console window. Thanks :-) 
  }

</script>

<script src="../static/js/addservice.js"></script>
{% endblock content %}